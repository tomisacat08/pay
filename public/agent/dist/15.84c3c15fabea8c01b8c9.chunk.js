webpackJsonp([15],{235:function(t,e,n){"use strict";function a(t){c||n(331)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(261),s=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);var r=n(333),l=(n.n(r),n(4)),c=!1,g=a,d=Object(l.a)(s.a,r.render,r.staticRenderFns,!1,g,"data-v-9088088e",null);d.options.__file="src\\views\\balance\\task.vue",e.default=d.exports},261:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(32),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(t,e,n,a){return e("Button",{props:{type:"primary"},style:{margin:"0 5px"},on:{click:function(){t.formItem.id=n.id,t.showMsg.no_pay=n.settlement_money,t.changeMoney=n.settlement_money,t.formItem.tableInfo="",t.changeAgentData=[],t.formItem.tableInfoAgent=[],t.changeAgentOnlyData=[],t.modalSetting.show=!0,t.modalSetting.index=a,t.changeInfo(t.formItem.id)}}},"手动分配")};e.default={name:"interface_group",data:function(){return{uploadUrl:"",uploadHeader:{},changeMoney:"",beforeChangeMoney:"",changeAgentData:[],agentOnlyList:[],agentOnlyListIsShow:!1,changeAgentOnlyData:[],changeAgentOnlyList:[],columnsList:[{title:"序号",type:"index",width:65,align:"center"},{title:"结算单号",align:"center",key:"settlement_sn"},{title:"商户编号",align:"center",key:"pm_uid"},{title:"结算金额",align:"center",key:"settlement_money"},{title:"开户信息",align:"center",key:"bank_card"},{title:"结算时间",align:"center",key:"create_time"},{title:"操作",align:"center",key:"handle",width:150,handle:["edit"]}],tableData:[],tableShow:{currentPage:1,pageSize:10,listCount:0},searchConf:{settlement_sn:"",status:""},modalSetting:{show:!1,loading:!1,index:0},formItem:{tableInfo:[],tableInfoAgent:[],id:0},showMsg:{no_pay:""},ruleValidate:{}}},created:function(){this.init(),this.getList()},methods:{handleAgentOnly:function(t){var e=this;e.changeAgentOnlyData=[],!1===t[0]?(e.agentOnlyListIsShow=!0,e.changeAgentOnlyData=e.agentOnlyList):(e.agentOnlyListIsShow=!1,e.changeAgentOnlyData=[])},handleAgent:function(t){var e=this;e.changeAgentData=[],t&&t.forEach(function(t){var n=JSON.parse(t.split(","));e.changeAgentData.push(n);for(var a=e.changeAgentData.push(n),o={},s=[],i=0;i<a;i++)o[e.changeAgentData[i].id]||(s.push(e.changeAgentData[i]),o[e.changeAgentData[i].id]=!0);e.changeAgentData=s})},init:function(){var t=this;t.changeAgentOnlyList=[{title:"ID",align:"center",key:"uid",width:80},{title:"代理商名称",align:"center",key:"nickname",width:150},{title:"未结算总额",align:"center",key:"return_money",width:150},{title:"输入金额",align:"center",key:"value",render:function(e,n){return e("Input",{props:{type:"text",value:t.changeAgentOnlyData[n.index].value},on:{"on-blur":function(e){if(Number(e.target.value)>=0&&Number(e.target.value)<=Number(n.row.return_money)){t.changeAgentOnlyData[n.index].value=Number(e.target.value);var a=0;a=""===t.beforeChangeMoney?0:t.beforeChangeMoney,t.changeMoney=t.changeMoney+a-Number(e.target.value)}else t.$Message.error("您输入的金额不正确，请重新输入")},"on-focus":function(e){Number(e.target.value)>=0&&Number(e.target.value)<=Number(n.row.return_money)&&(t.beforeChangeMoney=Number(e.target.value))}}})}}],this.columnsList.forEach(function(e){e.handle&&(e.render=function(e,n){var a=t.tableData[n.index];return 2===a.status?e("div",[s(t,e,a,n.index)]):1===a.status?e("Tag",{props:{color:"green"}},"已分配"):3===a.status?e("Tag",{props:{color:"red"}},"已完成被驳回"):4===a.status?e("Tag",{props:{color:"red"}},"未完成被驳回"):5===a.status?e("Tag",{props:{color:"green"}},"已完成"):e("Tag",{props:{color:"red"}},"状态异常")})})},submit:function(){var t=this;t.modalSetting.loading=!0,o.default.post("Balance/allot",{agentdataList:t.changeAgentOnlyData,id:t.formItem.id}).then(function(e){1===e.data.code?(t.$Message.success(e.data.msg),t.getList(),t.cancel()):t.$Message.error(e.data.msg),t.modalSetting.loading=!1})},cancel:function(){this.modalSetting.show=!1},changePage:function(t){this.tableShow.currentPage=t,this.getList()},changeSize:function(t){this.tableShow.pageSize=t,this.getList()},search:function(){this.tableShow.currentPage=1,this.getList()},getList:function(){var t=this;o.default.get("Balance/task",{params:{page:t.tableShow.currentPage,size:t.tableShow.pageSize,settlement_sn:t.searchConf.settlement_sn,status:t.searchConf.status}}).then(function(e){var n=e.data;1===n.code?(t.tableData=n.data.list,t.tableShow.listCount=n.data.count):-14===n.code?(t.$store.commit("logout",t),t.$router.push({name:"login"})):t.$Message.error(n.msg)})},changeInfo:function(t){var e=this;o.default.get("Balance/allotInfo",{params:{id:t}}).then(function(t){var n=t.data;1===n.code?e.agentOnlyList=n.data.agent:-14===n.code?(e.$store.commit("logout",e),e.$router.push({name:"login"})):e.$Message.error(n.msg)})},doCancel:function(t){t||(this.modalSetting.loading=!1,this.modalSetting.index=0)}}}},331:function(t,e,n){var a=n(332);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n(15).default;o("49c5904a",a,!1,{})},332:function(t,e,n){e=t.exports=n(14)(!1),e.push([t.i,"\n.api-box[data-v-9088088e] {\n  max-height: 300px;\n  overflow: auto;\n  border: 1px solid #dddee1;\n  border-radius: 5px;\n  padding: 10px;\n}\n.demo-upload-list[data-v-9088088e] {\n  display: inline-block;\n  width: 60px;\n  height: 60px;\n  text-align: center;\n  line-height: 60px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  overflow: hidden;\n  background: #fff;\n  position: relative;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  margin-right: 4px;\n}\n.demo-upload-list img[data-v-9088088e] {\n  width: 100%;\n  height: 100%;\n}\n.demo-upload-list-cover[data-v-9088088e] {\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover[data-v-9088088e] {\n  display: block;\n}\n.demo-upload-list-cover i[data-v-9088088e] {\n  color: #fff;\n  font-size: 20px;\n  cursor: pointer;\n  margin: 0 2px;\n}\n.titleTips[data-v-9088088e] {\n  width: 100%;\n}\n.titleTips .info[data-v-9088088e] {\n  color: #666;\n  font-size: 14px;\n}\n.titleTips .info .infoList[data-v-9088088e] {\n  padding: 0 10px;\n}\n.titleTips .info .infoList .status[data-v-9088088e] {\n  color: #2d8cf0;\n  font-size: 18px;\n  padding: 0 2px;\n}\n",""])},333:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",{staticStyle:{"margin-bottom":"10px"}},[n("Form",{attrs:{inline:""}},[n("FormItem",{staticStyle:{"margin-bottom":"0"}},[n("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择状态"},model:{value:t.searchConf.status,callback:function(e){t.$set(t.searchConf,"status",e)},expression:"searchConf.status"}},[n("Option",{attrs:{value:1}},[t._v("已分配")]),t._v(" "),n("Option",{attrs:{value:2}},[t._v("未分配")])],1)],1),t._v(" "),n("FormItem",{staticStyle:{"margin-bottom":"0"}},[n("Input",{attrs:{placeholder:"结算单号"},model:{value:t.searchConf.settlement_sn,callback:function(e){t.$set(t.searchConf,"settlement_sn",e)},expression:"searchConf.settlement_sn"}})],1),t._v(" "),n("FormItem",{staticStyle:{"margin-bottom":"0"}},[n("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询/刷新")])],1)],1)],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",[n("div",[n("Table",{attrs:{columns:t.columnsList,data:t.tableData,border:"","disabled-hover":""}})],1),t._v(" "),n("div",{staticClass:"margin-top-15",staticStyle:{"text-align":"center"}},[n("Page",{attrs:{total:t.tableShow.listCount,current:t.tableShow.currentPage,"page-size":t.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSize}})],1)])],1)],1),t._v(" "),n("Modal",{attrs:{width:"668",styles:{top:"30px"}},on:{"on-visible-change":t.doCancel},model:{value:t.modalSetting.show,callback:function(e){t.$set(t.modalSetting,"show",e)},expression:"modalSetting.show"}},[n("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"md-information-circle"}}),t._v(" "),n("span",[t._v("分配方式")])],1),t._v(" "),n("Form",{ref:"myForm",attrs:{rules:t.ruleValidate,model:t.formItem,"label-width":100}},[n("Col",{style:{marginBottom:"20px"},attrs:{md:24,lg:24}},[n("Card",[n("Row",{staticClass:"user-infor",attrs:{type:"flex"}},[n("Col",{attrs:{span:"20"}},[n("Row",{attrs:{"class-name":"made-child-con-middle",type:"flex",align:"middle"}},[n("div",{staticClass:"titleTips"},[n("p",{staticClass:"info"},[n("span",{staticClass:"infoList"},[t._v(" 结算金额："),n("span",{staticClass:"status"},[t._v(t._s(t.showMsg.no_pay))]),t._v("元")]),n("br"),t._v(" "),n("span",{staticClass:"infoList"},[t._v(" 剩余结算金额："),n("span",{staticClass:"status"},[t._v(t._s(t.changeMoney))]),t._v("元")])])])])],1)],1)],1)],1),t._v(" "),n("FormItem",{attrs:{label:"选择代理商",prop:"tableInfoAgent"}},[n("CheckboxGroup",{on:{"on-change":t.handleAgentOnly},model:{value:t.formItem.tableInfoAgent,callback:function(e){t.$set(t.formItem,"tableInfoAgent",e)},expression:"formItem.tableInfoAgent"}},t._l(t.agentOnlyList,function(e){return n("Checkbox",{key:e.id},[t._v(t._s(e.nickname))])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.agentOnlyListIsShow,expression:"agentOnlyListIsShow"}],staticClass:"margin-top-15"},[n("Table",{attrs:{columns:t.changeAgentOnlyList,data:t.changeAgentOnlyData,border:"","disabled-hover":""}})],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary",loading:t.modalSetting.loading},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)},o=[];a._withStripped=!0,e.render=a,e.staticRenderFns=o}});