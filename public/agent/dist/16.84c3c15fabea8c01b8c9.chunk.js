webpackJsonp([16],{236:function(t,e,a){"use strict";function i(t){c||a(334)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(262),o=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);var r=a(336),l=(a.n(r),a(4)),c=!1,d=i,m=Object(l.a)(o.a,r.render,r.staticRenderFns,!1,d,"data-v-3a4932fe",null);m.options.__file="src\\views\\balance\\myOrder.vue",e.default=m.exports},262:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(91),o=i(n),s=a(32),r=i(s),l=function(t,e,a,i){return e("Button",{props:{type:"primary"},style:{margin:"0 5px"},on:{click:function(){t.formItem.id=a.id,t.formItem.filePath=a.filePath,t.showMsg.msg=a.bank_card,t.modalSetting.show=!0,t.modalSetting.index=i}}},"上传凭证")};e.default={name:"interface_group",data:function(){return{uploadUrl:"",uploadHeader:{},imgUrl:"",visible:!1,isshow:!0,columnsList:[{title:"序号",type:"index",width:65,align:"center"},{title:"结算单号",align:"center",key:"order_sn"},{title:"商户编号",align:"center",key:"pm_uid"},{title:"结算金额",align:"center",key:"money"},{title:"被结算人",align:"center",key:"agent_mobile"},{title:"结算账户",align:"center",key:"bank_card"},{title:"结算时间",align:"center",key:"pay_time"},{title:"结算状态",align:"center",key:"status",width:150},{title:"操作",align:"center",key:"handle",width:180,handle:["edit"]}],tableData:[],tableShow:{currentPage:1,pageSize:10,listCount:0},searchConf:{status:"",order_sn:""},modalSetting:{show:!1,loading:!1,index:0},formItem:{filePath:"",id:0},showMsg:{msg:""},showImg:{filePathUrl:""},ruleValidate:{}}},created:function(){this.init(),this.getList()},methods:{init:function(){var t=this;this.uploadUrl=o.default.baseUrl+"Balance/proof",this.uploadHeader={agentToken:sessionStorage.getItem("agentToken")},this.columnsList.forEach(function(e){e.handle&&(e.render=function(e,a){var i=t.tableData[a.index];return e("div",[l(t,e,i,a.index)])}),"status"===e.key&&(e.render=function(e,a){var i=t.tableData[a.index];return 1==i.status?e("Tag",{props:{color:"green"}},"等待打款"):2==i.status?e("Tag",{props:{color:"blue"}},"打款成功"):3==i.status?e("Tag",{props:{color:"red"}},"等待打款被驳回"):e("Tag",{props:{color:"red"}},"打款成功被驳回")})})},alertAdd:function(){this.modalSetting.show=!0},submit:function(){var t=this;t.modalSetting.loading=!0,this.$refs.myForm.validate(function(e){e&&r.default.post("Balance/proofSave",t.formItem).then(function(e){1===e.data.code?(t.$Message.success(e.data.msg),t.cancel()):(t.$Message.error(e.data.msg),t.modalSetting.loading=!1),t.getList()})})},cancel:function(){this.modalSetting.show=!1},changePage:function(t){this.tableShow.currentPage=t,this.getList()},changeSize:function(t){this.tableShow.pageSize=t,this.getList()},changeMemberPage:function(t){this.memberShow.currentPage=t,this.getMemberList()},changeMemberSize:function(t){this.memberShow.pageSize=t,this.getMemberList()},search:function(){this.tableShow.currentPage=1,this.getList()},getList:function(){var t=this;r.default.get("Balance/myOrder",{params:{page:t.tableShow.currentPage,size:t.tableShow.pageSize,order_sn:t.searchConf.order_sn,status:t.searchConf.status}}).then(function(e){var a=e.data;1===a.code?(t.tableData=a.data.list,t.tableShow.listCount=a.data.count):-14===a.code?(t.$store.commit("logout",t),t.$router.push({name:"login"})):t.$Message.error(a.msg)})},getMemberList:function(){var t=this;r.default.get("Agent/member_index",{params:{page:t.memberShow.currentPage,size:t.memberShow.pageSize,id:t.memberShow.id}}).then(function(e){var a=e.data;1===a.code?(t.memberData=a.data.list,t.memberShow.listCount=a.data.count):-14===a.code?(t.$store.commit("logout",t),t.$router.push({name:"login"})):t.$Message.error(a.msg)})},handleImgFormatError:function(t){this.$Notice.warning({title:"文件类型不合法",desc:t.name+"的文件类型不正确，请上传jpg或者png图片。"})},handleImgRemove:function(){this.formItem.filePath=""},handleImgSuccess:function(t){1===t.code?(this.$Message.success(t.msg),this.formItem.filePath=t.data.filePath,this.showImg.filePathUrl=t.data.fileUrl):this.$Message.error(t.msg)},handleImgMaxSize:function(t){this.$Notice.warning({title:"文件大小不合法",desc:t.name+"太大啦请上传小于5M的文件。"})},doCancel:function(t){t||(this.formItem.id=0,this.formItem.filePath="",this.$refs.myForm.resetFields(),this.modalSetting.loading=!1,this.modalSetting.index=0)}}}},334:function(t,e,a){var i=a(335);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a(15).default;n("44aaa268",i,!1,{})},335:function(t,e,a){e=t.exports=a(14)(!1),e.push([t.i,"\n.formContent .formPwd[data-v-3a4932fe] {\n  position: relative;\n}\n.formContent .formPwd .clean[data-v-3a4932fe] {\n  position: absolute;\n  top: 0;\n  right: 10px;\n}\n.titleTips[data-v-3a4932fe] {\n  width: 100%;\n  line-height: 1;\n}\n.titleTips .info[data-v-3a4932fe] {\n  color: #666;\n  font-size: 14px;\n}\n.titleTips .info .infoList[data-v-3a4932fe] {\n  padding: 0 10px;\n}\n.titleTips .info .infoList .status[data-v-3a4932fe] {\n  color: #2d8cf0;\n  font-size: 18px;\n  padding: 0 2px;\n}\n",""])},336:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",{staticStyle:{"margin-bottom":"10px"}},[a("Form",{attrs:{inline:""}},[a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"结算状态"},model:{value:t.searchConf.status,callback:function(e){t.$set(t.searchConf,"status",e)},expression:"searchConf.status"}},[a("Option",{attrs:{value:1}},[t._v("未打款")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("已打款")])],1)],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"结算单号"},model:{value:t.searchConf.order_sn,callback:function(e){t.$set(t.searchConf,"order_sn",e)},expression:"searchConf.order_sn"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询/刷新")])],1)],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("div",[a("Table",{attrs:{columns:t.columnsList,data:t.tableData,border:"","disabled-hover":""}})],1),t._v(" "),a("div",{staticClass:"margin-top-15",staticStyle:{"text-align":"center"}},[a("Page",{attrs:{total:t.tableShow.listCount,current:t.tableShow.currentPage,"page-size":t.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSize}})],1)])],1)],1),t._v(" "),a("Modal",{attrs:{width:"668",styles:{top:"30px"}},on:{"on-visible-change":t.doCancel},model:{value:t.modalSetting.show,callback:function(e){t.$set(t.modalSetting,"show",e)},expression:"modalSetting.show"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"md-information-circle"}}),t._v(" "),a("span",[t._v("上传凭证信息")])],1),t._v(" "),a("Form",{ref:"myForm",staticClass:"formContent",attrs:{rules:t.ruleValidate,model:t.formItem,"label-width":100}},[a("Col",{style:{marginBottom:"20px"},attrs:{md:24,lg:24}},[a("Card",[a("Row",{staticClass:"user-infor",attrs:{type:"flex"}},[a("Col",{attrs:{span:"20"}},[a("Row",{attrs:{"class-name":"made-child-con-middle",type:"flex",align:"middle"}},[a("div",{staticClass:"titleTips"},[a("p",{staticClass:"info"},[a("span",{staticClass:"infoList"},[t._v(" 结算人信息："),a("span",{staticClass:"status"},[t._v(t._s(t.showMsg.msg))])])])])])],1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"上传打款凭证",prop:"filePath"}},[t.formItem.filePath?a("div",{staticClass:"demo-upload-list"},[a("img",{staticStyle:{width:"58px",height:"58px","line-height":"58px"},attrs:{src:t.showImg.filePathUrl}}),t._v(" "),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){t.handleImgRemove()}}})],1)]):t._e(),t._v(" "),t.formItem.filePath?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formItem.filePath,expression:"formItem.filePath"}],attrs:{type:"hidden",name:"filePath"},domProps:{value:t.formItem.filePath},on:{input:function(e){e.target.composing||t.$set(t.formItem,"filePath",e.target.value)}}}):t._e(),t._v(" "),t.formItem.filePath?t._e():a("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{type:"drag",action:t.uploadUrl,headers:t.uploadHeader,format:["jpg","jpeg","png"],"max-size":5120,"on-success":t.handleImgSuccess,"on-format-error":t.handleImgFormatError,"on-exceeded-size":t.handleImgMaxSize}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.modalSetting.loading},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)},n=[];i._withStripped=!0,e.render=i,e.staticRenderFns=n}});