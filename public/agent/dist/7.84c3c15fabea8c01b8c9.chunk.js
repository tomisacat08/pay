webpackJsonp([7],{231:function(t,e,a){"use strict";function n(t){l||a(317)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(257),o=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(319),c=(a.n(r),a(4)),l=!1,_=n,d=Object(c.a)(o.a,r.render,r.staticRenderFns,!1,_,null,null);d.options.__file="src\\views\\transaction\\dealdetails.vue",e.default=d.exports},257:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(32),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t,e,a,n){return e("Button",{props:{type:"primary"},style:{margin:"0 5px"},on:{click:function(){if(a.get_money_qrcode_img_id<=0)return t.$Message.error("无关联信息");s.default.get("Index/getImgUrlById",{params:{id:a.get_money_qrcode_img_id}}).then(function(e){a.loading=!1,1===e.data.code?t.handleView(e.data.data):t.$Message.error(e.data.msg)})}}},"收款信息")},i=function(t,e,a,n){return e("Poptip",{props:{confirm:!0,title:"会员收款超时，您确定要帮助收款吗？",transfer:!0},on:{"on-ok":function(){s.default.post("Transaction/confirmReceipt",{id:a.id}).then(function(e){a.loading=!1,1===e.data.code?(t.$Message.success(e.data.msg),t.getList()):t.$Message.error(e.data.msg)})}}},[e("Button",{style:{margin:"0 5px"},props:{type:"primary",placement:"top",loading:a.isDeleting}},"帮助收款")])};e.default={name:"order_index",data:function(){return{imgInfo:[],visible:!1,total_start_money:"",success_start_money:"",columnsList:[{title:"订单序号",width:100,align:"center",key:"id"},{title:"商户编号",align:"center",key:"merchant_uid"},{title:"商户单号",align:"center",key:"merchant_order_sn"},{title:"收款员",align:"center",key:"member_mobile"},{title:"订单金额",align:"center",key:"start_money"},{title:"收款金额",align:"center",key:"get_money"},{title:"订单时间",align:"center",key:"create_time"},{title:"收款状态",align:"center",key:"order_status"},{title:"操作",align:"center",key:"handle",width:280,handle:["help","check"]}],tableData:[],tableShow:{currentPage:1,pageSize:10,listCount:0},statusCheck:{not_match:"not_match",not_payment:"not_payment",pay_timeout:"pay_timeout",money_receipt:"money_receipt",not_refund:"not_refund",refund:"refund",img_timeout:"img_timeout"},searchConf:{order_id:"",pay_info:"",merchant_sn:"",start_money:"",get_money:"",order_status:"",member:"",daterange:""}}},created:function(){this.init(),this.getList()},methods:{timeChange:function(t){""===t[0]&&""===t[1]?this.searchConf.daterange="":this.searchConf.daterange=t},handleView:function(t){this.imgInfo=t,this.visible=!0},init:function(){var t=this;this.columnsList.forEach(function(e){e.handle&&(e.render=function(e,a){var n=t.tableData[a.index];return 2===n.status?e("div",[i(t,e,n,a.index),o(t,e,n,a.index)]):e("div",[o(t,e,n,a.index)])}),"order_status"===e.key&&(e.render=function(e,a){var n=t.tableData[a.index];return 1===n.status&&1===n.pay_status?e("div",{style:{color:"#2db7f5","font-weight":"600"}},"匹配中"):2===n.status&&1===n.pay_status?e("div",{style:{color:"#f30","font-weight":"600"}},"未收款"):2===n.status&&3===n.pay_status?e("div",{style:{color:"#f00","font-weight":"600"}},"收款超时"):3===n.status&&2===n.pay_status?e("div",{style:{color:"#39f","font-weight":"600"}},"已收款待返款"):4===n.status&&2===n.pay_status&&2===n.is_clear?e("div",{style:{color:"#f90","font-weight":"600"}},"待确认返款"):-1===n.status&&1===n.pay_status?e("div",{style:{color:"#f00","font-weight":"600"}},"传码超时"):4===n.status&&2===n.pay_status&&1===n.is_clear?e("div",{style:{color:"#0c6","font-weight":"600"}},"已返款"):e("div",{style:{color:"#f0f","font-weight":"600"}},"状态异常")})})},changePage:function(t){this.tableShow.currentPage=t,this.getList()},changeSize:function(t){this.tableShow.pageSize=t,this.getList()},search:function(){this.tableShow.currentPage=1,this.getList()},getList:function(){var t=this;s.default.get("Transaction/index",{params:{page:t.tableShow.currentPage,size:t.tableShow.pageSize,order_id:t.searchConf.order_id,merchant_sn:t.searchConf.merchant_sn,pay_info:t.searchConf.pay_info,start_money:t.searchConf.start_money,get_money:t.searchConf.get_money,member:t.searchConf.member,order_status:t.searchConf.order_status,daterange:t.searchConf.daterange}}).then(function(e){var a=e.data;1===a.code?(t.tableData=a.data.list,t.total_start_money=a.data.total_start_money,t.success_start_money=a.data.success_start_money,t.tableShow.listCount=a.data.count):-14===a.code?(t.$store.commit("logout",t),t.$router.push({name:"login"})):t.$Message.error(a.msg)})},doCancel:function(t){t||(this.formItem.id=0)}}}},317:function(t,e,a){var n=a(318);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=a(15).default;s("4db21ffe",n,!1,{})},318:function(t,e,a){e=t.exports=a(14)(!1),e.push([t.i,"\n.titleTips {\n  width: 100%;\n  padding: 10px 15px;\n  border: 1px solid #2d8cf0;\n  border-radius: 5px;\n  min-height: 100px;\n  line-height: 100px;\n  margin-bottom: 15px;\n}\n.titleTips .info {\n  color: #666;\n  font-size: 14px;\n}\n.titleTips .info .infoList {\n  padding: 0 10px;\n}\n.titleTips .info .infoList .status {\n  color: #2d8cf0;\n  font-size: 18px;\n  padding: 0 2px;\n}\n",""])},319:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",{staticStyle:{"margin-bottom":"10px"}},[a("Form",{attrs:{inline:""}},[a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"收款状态"},model:{value:t.searchConf.order_status,callback:function(e){t.$set(t.searchConf,"order_status",e)},expression:"searchConf.order_status"}},[a("Option",{attrs:{value:t.statusCheck.not_match}},[t._v("匹配中")]),t._v(" "),a("Option",{attrs:{value:t.statusCheck.not_payment}},[t._v("未收款")]),t._v(" "),a("Option",{attrs:{value:t.statusCheck.pay_timeout}},[t._v("收款超时")]),t._v(" "),a("Option",{attrs:{value:t.statusCheck.money_receipt}},[t._v("已收款待返款")]),t._v(" "),a("Option",{attrs:{value:t.statusCheck.not_refund}},[t._v("待确认返款")]),t._v(" "),a("Option",{attrs:{value:t.statusCheck.refund}},[t._v("已返款")]),t._v(" "),a("Option",{attrs:{value:t.statusCheck.img_timeout}},[t._v("传码超时")])],1)],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"订单序号"},model:{value:t.searchConf.order_id,callback:function(e){t.$set(t.searchConf,"order_id",e)},expression:"searchConf.order_id"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"商户单号"},model:{value:t.searchConf.merchant_sn,callback:function(e){t.$set(t.searchConf,"merchant_sn",e)},expression:"searchConf.merchant_sn"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"订单金额"},model:{value:t.searchConf.start_money,callback:function(e){t.$set(t.searchConf,"start_money",e)},expression:"searchConf.start_money"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"收款金额"},model:{value:t.searchConf.get_money,callback:function(e){t.$set(t.searchConf,"get_money",e)},expression:"searchConf.get_money"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"收款员"},model:{value:t.searchConf.member,callback:function(e){t.$set(t.searchConf,"member",e)},expression:"searchConf.member"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"收款信息(卡号,账号,二维地址)"},model:{value:t.searchConf.pay_info,callback:function(e){t.$set(t.searchConf,"pay_info",e)},expression:"searchConf.pay_info"}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Date-picker",{staticStyle:{width:"280px"},attrs:{type:"datetimerange",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":t.timeChange}})],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询/刷新")])],1)],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("div",{staticClass:"titleTips"},[a("p",{staticClass:"info"},[a("span",{staticClass:"infoList"},[t._v("订单总额："),a("span",{staticClass:"status"},[t._v(t._s(t.total_start_money?t.total_start_money:0))])]),t._v(" "),a("span",{staticClass:"infoList"},[t._v("成交总额："),a("span",{staticClass:"status"},[t._v(t._s(t.success_start_money?t.success_start_money:0))])])])]),t._v(" "),a("div",[a("Table",{attrs:{columns:t.columnsList,data:t.tableData,border:"","disabled-hover":""}})],1),t._v(" "),a("div",{staticClass:"margin-top-15",staticStyle:{"text-align":"center"}},[a("Page",{attrs:{total:t.tableShow.listCount,current:t.tableShow.currentPage,"page-size":t.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSize}})],1)])],1)],1),t._v(" "),a("Modal",{attrs:{title:"查看收款信息","class-name":"fl-image-modal"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[1==t.imgInfo.type?a("div",{staticClass:"status"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imgInfo.imgUrl}}),t._v(" "),a("div",[t._v("收款类型:"+t._s(t.imgInfo.type_name))]),t._v(" "),a("div",[t._v("二维码链接:"+t._s(t.imgInfo.pay_qrcode_url))])]):t._e(),t._v(" "),2==t.imgInfo.type?a("div",{staticClass:"status"},[a("div",[t._v("收款类型:"+t._s(t.imgInfo.type_name))]),t._v(" "),a("div",[t._v("收款账号:"+t._s(t.imgInfo.account))]),t._v(" "),a("div",[t._v("真实姓名:"+t._s(t.imgInfo.real_name))])]):t._e(),t._v(" "),3==t.imgInfo.type?a("div",{staticClass:"status"},[a("div",[t._v("收款类型:"+t._s(t.imgInfo.type_name))]),t._v(" "),a("div",[t._v("所属银行:"+t._s(t.imgInfo.bank_name))]),t._v(" "),a("div",[t._v("收款卡号:"+t._s(t.imgInfo.bank_card))]),t._v(" "),a("div",[t._v("开户人:"+t._s(t.imgInfo.bank_account))]),t._v(" "),a("div",[t._v("备注:"+t._s(t.imgInfo.bank_desc))])]):t._e()])],1)},s=[];n._withStripped=!0,e.render=n,e.staticRenderFns=s}});