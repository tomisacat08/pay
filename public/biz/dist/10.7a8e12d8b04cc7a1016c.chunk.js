webpackJsonp([10],{230:function(e,t,a){"use strict";function r(e){l||a(293)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(248),o=a.n(n);for(var c in n)"default"!==c&&function(e){a.d(t,e,function(){return n[e]})}(c);var s=a(295),i=(a.n(s),a(4)),l=!1,m=r,d=Object(i.a)(o.a,s.render,s.staticRenderFns,!1,m,null,null);d.options.__file="src\\views\\deal\\scheduling.vue",t.default=d.exports},248:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(91),o=(r(n),a(32)),c=r(o),s=a(23),i=r(s),l=function(e,t,a,r){return t("Poptip",{props:{confirm:!0,title:"确定重新通知?",transfer:!0},on:{"on-ok":function(){c.default.get("MerchantOrder/confirmDueIn",{params:{id:a.id}}).then(function(t){a.loading=!1,1===t.data.code?e.$Message.success(t.data.msg):e.$Message.error(t.data.msg)})}}},[t("Button",{style:{margin:"0 5px"},props:{type:"primary",placement:"top",loading:a.loading}},"发起通知")])};t.default={name:"order_list",data:function(){return{channelData:[],columnsList:[{title:"订单ID",align:"center",key:"id"},{title:"商户单号",align:"center",key:"merchant_order_sn"},{title:"订单金额",align:"center",key:"start_money"},{title:"商户下单时间",align:"center",key:"merchant_order_date"},{title:"平台订单时间",align:"center",key:"create_time"},{title:"订单状态",align:"center",key:"order_status"},{title:"客户IP",align:"center",key:"ip"},{title:"操作",align:"center",key:"handle",handle:["callBak"]}],tableData:[],order_money:"",order_num:"",tableShow:{currentPage:1,pageSize:10,listCount:0},searchConf:{id:"",merchant_sn:"",daterange:"",confirmTimedaterange:"",status:"",isReplacement:""},modalSetting:{show:!1,loading:!1},formItem:{id:"",merchant_id:"",merchant_order_money:"",merchant_order_callbak_confirm_duein:"",merchant_order_callbak_redirect:"",merchant_order_name:"",merchant_order_count:"",merchant_order_desc:"",merchant_order_channel:"",merchant_order_extend:"",merchant_order_callbak_confirm_create:""},ruleValidate:{money:[{required:!0,message:"补入金额为空",trigger:"blur"}],member_ratio:[{required:!0,message:"收款员比例不能为空",trigger:"blur"}]}}},created:function(){this.init(),this.getList(),this.getChannelList()},methods:{timeChange:function(e){""===e[0]&&""===e[1]?this.searchConf.daterange="":this.searchConf.daterange=e},confirmTimeChange:function(e){""===e[0]&&""===e[1]?this.searchConf.confirmTimedaterange="":this.searchConf.confirmTimedaterange=e},changePage:function(e){this.tableShow.currentPage=e,this.getList()},changeSize:function(e){this.tableShow.pageSize=e,this.getList()},search:function(){this.tableShow.currentPage=1,this.getList()},init:function(){var e=this;this.columnsList.forEach(function(t){"order_status"===t.key&&(t.render=function(t,a){return 2===e.tableData[a.index].pay_status?t("div",{style:{color:"#2d8cf0","font-weight":"600"}},"已收款"):t("div",{style:{color:"#f00","font-weight":"600"}},"未收款")}),"handle"===t.key&&(t.render=function(t,a){var r=e.tableData[a.index];if(2===r.pay_status)return t("div",[l(e,t,r,a.index)])})})},exportExcel:function(){var e=this;(0,c.default)({method:"get",url:"MerchantOrder/index",responseType:"arraybuffer",params:{page:e.tableShow.currentPage,size:e.tableShow.pageSize,type:e.searchConf.type,id:e.searchConf.id,merchant_sn:e.searchConf.merchant_sn,daterange:e.searchConf.daterange,confirmTimedaterange:e.searchConf.confirmTimedaterange,status:e.searchConf.status,isReplacement:e.searchConf.isReplacement,excel:1}}).then(function(e){var t=i.default.getNowFormatDate(),a="商家订单明细_"+t+".xlsx";i.default.fileDownload(e.data,a)}).catch(function(e){console.log(e)})},alertAdd:function(){this.modalSetting.show=!0,this.formItem.merchant_order_money="500",this.formItem.merchant_order_channel="alipay_qrcode",this.formItem.merchant_order_name="商户手动订单"},cancel:function(){this.modalSetting.show=!1},submit:function(){var e=this;this.$refs.myForm.validate(function(t){t&&(e.modalSetting.loading=!0,c.default.post("MerchantOrder/merchantOrderTest",e.formItem).then(function(t){200===t.data.code?(e.$Message.success(t.data.msg),setTimeout(function(){window.open(t.data.data.url)},500),e.cancel()):(e.$Message.error(t.data.msg),e.modalSetting.loading=!1),e.getList()}))})},getChannelList:function(){var e=this;c.default.get("Channel/getChannelList",{}).then(function(t){var a=t.data;1===a.code?e.channelData=a.data:-14===a.code?(e.$store.commit("logout",e),e.$router.push({name:"login"})):e.$Message.error(a.msg)})},getList:function(){var e=this;c.default.get("MerchantOrder/index",{params:{page:e.tableShow.currentPage,size:e.tableShow.pageSize,type:e.searchConf.type,id:e.searchConf.id,merchant_sn:e.searchConf.merchant_sn,daterange:e.searchConf.daterange,confirmTimedaterange:e.searchConf.confirmTimedaterange,status:e.searchConf.status,isReplacement:e.searchConf.isReplacement}}).then(function(t){var a=t.data;1===a.code?(e.order_money=a.data.order_money.toFixed(2),e.order_num=a.data.order_num,e.tableData=a.data.list,e.tableShow.listCount=a.data.count):-14===a.code?(e.$store.commit("logout",e),e.$router.push({name:"login"})):e.$Message.error(a.msg)})},doCancel:function(e){e||(this.formItem.id=0)}}}},293:function(e,t,a){var r=a(294);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a(15).default;n("7697b8ae",r,!1,{})},294:function(e,t,a){t=e.exports=a(14)(!1),t.push([e.i,"\n.titleTips {\n  width: 100%;\n}\n.titleTips .info .infoMsg {\n  display: inline-block;\n  padding-right: 20px;\n  color: #666;\n  font-size: 14px;\n}\n.titleTips .info .infoMsg .status {\n  color: #2d8cf0;\n  font-size: 18px;\n}\n",""])},295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",{staticStyle:{"margin-bottom":"10px"}},[a("Form",{attrs:{inline:""}},[a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"订单状态"},model:{value:e.searchConf.status,callback:function(t){e.$set(e.searchConf,"status",t)},expression:"searchConf.status"}},[a("Option",{attrs:{value:1}},[e._v("已收款")]),e._v(" "),a("Option",{attrs:{value:0}},[e._v("未收款")])],1),e._v(" "),a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"派单状态"},model:{value:e.searchConf.isReplacement,callback:function(t){e.$set(e.searchConf,"isReplacement",t)},expression:"searchConf.isReplacement"}},[a("Option",{attrs:{value:1}},[e._v("平台补单")]),e._v(" "),a("Option",{attrs:{value:2}},[e._v("正常派单")])],1)],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"订单ID"},model:{value:e.searchConf.id,callback:function(t){e.$set(e.searchConf,"id",t)},expression:"searchConf.id"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"商户单号"},model:{value:e.searchConf.merchant_sn,callback:function(t){e.$set(e.searchConf,"merchant_sn",t)},expression:"searchConf.merchant_sn"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Date-picker",{staticStyle:{width:"280px"},attrs:{type:"datetimerange",placeholder:"选择下单时间",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":e.timeChange}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Date-picker",{staticStyle:{width:"280px"},attrs:{type:"datetimerange",placeholder:"选择到账时间",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":e.confirmTimeChange}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询/刷新")])],1)],1)],1)],1)],1),e._v(" "),a("Row",[a("Col",{style:{marginBottom:"10px"},attrs:{md:24,lg:24}},[a("Card",[a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"24"}},[a("Row",{attrs:{"class-name":"made-child-con-middle",type:"flex",align:"middle"}},[a("div",{staticClass:"titleTips"},[a("p",{staticClass:"info"},[a("span",{staticClass:"infoMsg"},[e._v("完成订单数："),a("span",{staticClass:"status"},[e._v(e._s(e.order_num))])]),e._v(" "),a("span",{staticClass:"infoMsg"},[e._v("完成总金额："),a("span",{staticClass:"status"},[e._v(e._s(e.order_money))]),e._v("元")])])])])],1)],1)],1)],1),e._v(" "),a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{staticStyle:{height:"32px"},attrs:{slot:"title"},slot:"title"},[a("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:e.exportExcel}},[e._v("导出记录")]),e._v(" "),a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.alertAdd}},[e._v("手动下单")])],1),e._v(" "),a("div",[a("Table",{attrs:{columns:e.columnsList,data:e.tableData,border:"","disabled-hover":""}})],1),e._v(" "),a("div",{staticClass:"margin-top-15",staticStyle:{"text-align":"center"}},[a("Page",{attrs:{total:e.tableShow.listCount,current:e.tableShow.currentPage,"page-size":e.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changeSize}})],1)])],1)],1),e._v(" "),a("Modal",{attrs:{width:"668",styles:{top:"30px"}},on:{"on-visible-change":e.doCancel},model:{value:e.modalSetting.show,callback:function(t){e.$set(e.modalSetting,"show",t)},expression:"modalSetting.show"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"md-information-circle"}}),e._v(" "),a("span",[e._v("下单详情")])],1),e._v(" "),a("Form",{ref:"myForm",staticClass:"formContent",attrs:{rules:e.ruleValidate,model:e.formItem,"label-width":120}},[a("FormItem",{attrs:{label:"订单金额",prop:"merchant_order_money"}},[a("Input",{attrs:{placeholder:"请输入订单金额"},model:{value:e.formItem.merchant_order_money,callback:function(t){e.$set(e.formItem,"merchant_order_money",t)},expression:"formItem.merchant_order_money"}})],1),e._v(" "),a("Form-item",{attrs:{label:"支付渠道",prop:"merchant_order_channel"}},[a("i-select",{attrs:{placeholder:"请选择支付渠道"},model:{value:e.formItem.merchant_order_channel,callback:function(t){e.$set(e.formItem,"merchant_order_channel",t)},expression:"formItem.merchant_order_channel"}},e._l(e.channelData,function(t,r){return a("Option",{key:r,attrs:{value:r}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"收款成功通知地址",prop:"merchant_order_callbak_confirm_duein"}},[a("Input",{attrs:{placeholder:"请输入收款成功通知地址"},model:{value:e.formItem.merchant_order_callbak_confirm_duein,callback:function(t){e.$set(e.formItem,"merchant_order_callbak_confirm_duein",t)},expression:"formItem.merchant_order_callbak_confirm_duein"}})],1),e._v(" "),a("FormItem",{attrs:{label:"收款成功跳转地址",prop:"merchant_order_callbak_redirect"}},[a("Input",{attrs:{placeholder:"请输入收款成功跳转地址"},model:{value:e.formItem.merchant_order_callbak_redirect,callback:function(t){e.$set(e.formItem,"merchant_order_callbak_redirect",t)},expression:"formItem.merchant_order_callbak_redirect"}})],1),e._v(" "),a("FormItem",{attrs:{label:"建单成功通知地址",prop:"merchant_order_callbak_confirm_create"}},[a("Input",{attrs:{placeholder:"请输入建单成功通知地址"},model:{value:e.formItem.merchant_order_callbak_confirm_create,callback:function(t){e.$set(e.formItem,"merchant_order_callbak_confirm_create",t)},expression:"formItem.merchant_order_callbak_confirm_create"}})],1),e._v(" "),a("FormItem",{attrs:{label:"商品名称",prop:"merchant_order_name"}},[a("Input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.formItem.merchant_order_name,callback:function(t){e.$set(e.formItem,"merchant_order_name",t)},expression:"formItem.merchant_order_name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"商品数量",prop:"merchant_order_count"}},[a("Input",{attrs:{placeholder:"请输入商品数量"},model:{value:e.formItem.merchant_order_count,callback:function(t){e.$set(e.formItem,"merchant_order_count",t)},expression:"formItem.merchant_order_count"}})],1),e._v(" "),a("FormItem",{attrs:{label:"商品详情",prop:"merchant_order_desc"}},[a("Input",{attrs:{placeholder:"请输入商品详情"},model:{value:e.formItem.merchant_order_desc,callback:function(t){e.$set(e.formItem,"merchant_order_desc",t)},expression:"formItem.merchant_order_desc"}})],1),e._v(" "),a("FormItem",{attrs:{label:"商品扩展字段",prop:"merchant_order_extend"}},[a("Input",{attrs:{placeholder:"请输入商品扩展字段(口令)"},model:{value:e.formItem.merchant_order_extend,callback:function(t){e.$set(e.formItem,"merchant_order_extend",t)},expression:"formItem.merchant_order_extend"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.modalSetting.loading},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)},n=[];r._withStripped=!0,t.render=r,t.staticRenderFns=n}});