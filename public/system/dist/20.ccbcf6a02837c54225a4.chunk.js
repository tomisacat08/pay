webpackJsonp([20],{244:function(e,t,a){"use strict";function n(e){l||a(392)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(286),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);var s=a(394),c=(a.n(s),a(4)),l=!1,d=n,m=Object(c.a)(r.a,s.render,s.staticRenderFns,!1,d,null,null);m.options.__file="src\\views\\order\\index.vue",t.default=m.exports},286:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(32),r=n(o),i=a(23),s=n(i),c=function(e,t,a,n){return t("Button",{props:{type:"primary"},style:{margin:"0 5px"},on:{click:function(){if(a.get_money_qrcode_img_id<=0)return e.$Message.error("无关联信息");r.default.get("Index/getImgUrlById",{params:{id:a.get_money_qrcode_img_id}}).then(function(t){a.loading=!1,1===t.data.code?e.handleView(t.data.data):e.$Message.error(t.data.msg)})}}},"收款信息")},l=function(e,t,a,n){return t("Poptip",{props:{confirm:!0,title:"您确定要标注订单吗?",transfer:!0},on:{"on-ok":function(){r.default.get("MerchantOrder/joinTip",{params:{id:a.id,tip_order:2}}).then(function(t){a.loading=!1,1===t.data.code?(e.getList(),e.$Message.success(t.data.msg)):e.$Message.error(t.data.msg)})}}},[t("Button",{style:{margin:"0 5px"},props:{type:"primary",placement:"top",loading:a.loading}},"标注订单")])};t.default={name:"order_index",data:function(){return{columnsList:[{title:"ID",align:"center",key:"id"},{title:"商户编号",align:"center",key:"merchantInfo"},{title:"商户单号",align:"center",key:"merchant_order_sn"},{title:"收款金额",align:"center",key:"get_money"},{title:"通道编码",align:"center",key:"merchant_order_channel"},{title:"收款人",align:"center",key:"memberInfo"},{title:"代理",align:"center",key:"agentInfo"},{title:"确认耗时",align:"center",key:"confirmInterval"},{title:"订单时间",align:"center",key:"create_time"},{title:"收款状态",align:"center",key:"order_status"},{title:"IP",align:"center",key:"ip"},{title:"收款码",align:"center",key:"handle",width:280,handle:["add","check"]}],imgInfo:{},visible:!1,tableData:[],order_money:"",order_num:"",tableShow:{currentPage:1,pageSize:10,listCount:0},statusCheck:{not_match:"not_match",not_payment:"not_payment",pay_timeout:"pay_timeout",money_receipt:"money_receipt",not_refund:"not_refund",refund:"refund",img_timeout:"img_timeout"},channelData:[],searchConf:{order_status:"",channel:"",pay_info:"",id:"",merchant_sn:"",agent_mobile:"",member_mobile:"",merchant_uid:"",start_money:"",ip:"",daterange:""}}},created:function(){this.getChannelList(),this.init(),this.getList()},methods:{timeChange:function(e){""===e[0]&&""===e[1]?this.searchConf.daterange="":this.searchConf.daterange=e},handleView:function(e){this.imgInfo=e,this.visible=!0},init:function(){var e=this;this.columnsList.forEach(function(t){t.handle&&(t.render=function(t,a){var n=e.tableData[a.index];return 2===n.tip_order?t("div",[c(e,t,n,a.index)]):t("div",[l(e,t,n,a.index),c(e,t,n,a.index)])}),"order_status"===t.key&&(t.render=function(t,a){var n=e.tableData[a.index];return 1===n.order_status.value?t("div",{style:{color:"#1dff4e","font-weight":"600"}},"匹配中"):2===n.order_status.value?t("div",{style:{color:"#000000","font-weight":"600"}},"传码超时"):3===n.order_status.value?t("div",{style:{color:"rgba(103,194,245,0.84)","font-weight":"600"}},"未收款"):4===n.order_status.value?t("div",{style:{color:"#000000","font-weight":"600"}},"收款超时"):5===n.order_status.value?t("div",{style:{color:"red","font-weight":"600"}},"已收款待返款"):6===n.order_status.value?t("div",{style:{color:"red","font-weight":"600"}},"待确认返款"):7===n.order_status.value?t("div",{style:{color:"#cc0934","font-weight":"600"}},"已返款"):t("div",{style:{color:"#67c2f5","font-weight":"600"}},"异常数据")}),"merchant_order_channel"===t.key&&(t.render=function(t,a){var n=e.tableData[a.index];return e.channelData.hasOwnProperty(n.merchant_order_channel)?t("div",{style:{color:e.channelData[n.merchant_order_channel].color,"font-weight":"600"}},e.channelData[n.merchant_order_channel].name):t("div",{style:{color:"#f51e46","font-weight":"600"}},"未知渠道")})})},changePage:function(e){this.tableShow.currentPage=e,this.getList()},changeSize:function(e){this.tableShow.pageSize=e,this.getList()},search:function(){this.tableShow.currentPage=1,this.getList()},exportExcel:function(){var e=this;(0,r.default)({method:"get",url:"MerchantOrder/index",responseType:"arraybuffer",params:{order_status:e.searchConf.order_status,channel:e.searchConf.channel,id:e.searchConf.id,member_mobile:e.searchConf.member_mobile,merchant_uid:e.searchConf.merchant_uid,agent_mobile:e.searchConf.agent_mobile,start_money:e.searchConf.start_money,merchant_sn:e.searchConf.merchant_sn,daterange:e.searchConf.daterange,pay_info:e.searchConf.pay_info,account:e.searchConf.account,ip:e.searchConf.ip,excel:1}}).then(function(e){var t=s.default.getNowFormatDate(),a="派单记录_"+t+".xlsx";s.default.fileDownload(e.data,a)}).catch(function(t){e.$Message.error(t.data)})},getList:function(){var e=this;r.default.get("MerchantOrder/index",{params:{page:e.tableShow.currentPage,size:e.tableShow.pageSize,order_status:e.searchConf.order_status,channel:e.searchConf.channel,id:e.searchConf.id,member_mobile:e.searchConf.member_mobile,merchant_uid:e.searchConf.merchant_uid,agent_mobile:e.searchConf.agent_mobile,start_money:e.searchConf.start_money,merchant_sn:e.searchConf.merchant_sn,pay_info:e.searchConf.pay_info,account:e.searchConf.account,ip:e.searchConf.ip,daterange:e.searchConf.daterange}}).then(function(t){var a=t.data;1===a.code?(e.order_money=a.data.order_money.toFixed(2),e.order_num=a.data.order_num,e.tableData=a.data.list,e.tableShow.listCount=a.data.count):-14===a.code?(e.$store.commit("logout",e),e.$router.push({name:"login"})):e.$Message.error(a.msg)})},getChannelList:function(){var e=this;r.default.get("Channel/getChannelList",{params:{}}).then(function(t){var a=t.data;1===a.code?e.channelData=a.data:e.$Message.error(a.msg)})},doCancel:function(e){e||(this.formItem.id=0)}}}},392:function(e,t,a){var n=a(393);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a(15).default;o("be13cd00",n,!1,{})},393:function(e,t,a){t=e.exports=a(14)(!1),t.push([e.i,"\n.titleTips {\n  width: 100%;\n}\n.titleTips .info .infoMsg {\n  display: inline-block;\n  padding-right: 20px;\n  color: #666;\n  font-size: 14px;\n}\n.titleTips .info .infoMsg .status {\n  color: #2d8cf0;\n  font-size: 18px;\n}\n",""])},394:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",{staticStyle:{"margin-bottom":"10px"}},[a("Form",{attrs:{inline:""}},[a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"收款状态"},model:{value:e.searchConf.order_status,callback:function(t){e.$set(e.searchConf,"order_status",t)},expression:"searchConf.order_status"}},[a("Option",{attrs:{value:e.statusCheck.not_match}},[e._v("匹配中")]),e._v(" "),a("Option",{attrs:{value:e.statusCheck.not_payment}},[e._v("未收款")]),e._v(" "),a("Option",{attrs:{value:e.statusCheck.pay_timeout}},[e._v("收款超时")]),e._v(" "),a("Option",{attrs:{value:e.statusCheck.money_receipt}},[e._v("已收款待返款")]),e._v(" "),a("Option",{attrs:{value:e.statusCheck.not_refund}},[e._v("待确认返款")]),e._v(" "),a("Option",{attrs:{value:e.statusCheck.refund}},[e._v("已返款")]),e._v(" "),a("Option",{attrs:{value:e.statusCheck.img_timeout}},[e._v("传码超时")])],1)],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("i-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"通道编码"},model:{value:e.searchConf.channel,callback:function(t){e.$set(e.searchConf,"channel",t)},expression:"searchConf.channel"}},e._l(e.channelData,function(t,n){return a("Option",{key:n,attrs:{value:n}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"订单ID"},model:{value:e.searchConf.id,callback:function(t){e.$set(e.searchConf,"id",t)},expression:"searchConf.id"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"商户单号"},model:{value:e.searchConf.merchant_sn,callback:function(t){e.$set(e.searchConf,"merchant_sn",t)},expression:"searchConf.merchant_sn"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"商户编号"},model:{value:e.searchConf.merchant_uid,callback:function(t){e.$set(e.searchConf,"merchant_uid",t)},expression:"searchConf.merchant_uid"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"代理账号"},model:{value:e.searchConf.agent_mobile,callback:function(t){e.$set(e.searchConf,"agent_mobile",t)},expression:"searchConf.agent_mobile"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"收款人账号"},model:{value:e.searchConf.member_mobile,callback:function(t){e.$set(e.searchConf,"member_mobile",t)},expression:"searchConf.member_mobile"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"收款信息(卡号,账号,二维地址)"},model:{value:e.searchConf.pay_info,callback:function(t){e.$set(e.searchConf,"pay_info",t)},expression:"searchConf.pay_info"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"订单金额"},model:{value:e.searchConf.start_money,callback:function(t){e.$set(e.searchConf,"start_money",t)},expression:"searchConf.start_money"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Input",{attrs:{placeholder:"ip"},model:{value:e.searchConf.ip,callback:function(t){e.$set(e.searchConf,"ip",t)},expression:"searchConf.ip"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Date-picker",{staticStyle:{width:"280px"},attrs:{type:"datetimerange",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":e.timeChange}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"0"}},[a("Button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询/刷新")])],1)],1)],1)],1)],1),e._v(" "),a("Row",[a("Col",{style:{marginBottom:"10px"},attrs:{md:24,lg:24}},[a("Card",[a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"24"}},[a("Row",{attrs:{"class-name":"made-child-con-middle",type:"flex",align:"middle"}},[a("div",{staticClass:"titleTips"},[a("p",{staticClass:"info"},[a("span",{staticClass:"infoMsg"},[e._v("完成订单数："),a("span",{staticClass:"status"},[e._v(e._s(e.order_num))])]),e._v(" "),a("span",{staticClass:"infoMsg"},[e._v("完成总金额："),a("span",{staticClass:"status"},[e._v(e._s(e.order_money))]),e._v("元")])])])])],1)],1)],1)],1),e._v(" "),a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{staticStyle:{height:"32px"},attrs:{slot:"title"},slot:"title"},[a("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:e.exportExcel}},[e._v("导出记录")])],1),e._v(" "),a("div",[a("Table",{ref:"table",attrs:{columns:e.columnsList,data:e.tableData,border:"","disabled-hover":""}})],1),e._v(" "),a("div",{staticClass:"margin-top-15",staticStyle:{"text-align":"center"}},[a("Page",{attrs:{total:e.tableShow.listCount,current:e.tableShow.currentPage,"page-size":e.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changeSize}})],1)])],1)],1),e._v(" "),a("Modal",{attrs:{title:"查看收款信息","class-name":"fl-image-modal"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[1==e.imgInfo.type?a("div",{staticClass:"status"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.imgInfo.imgUrl}}),e._v(" "),a("div",[e._v("收款类型:"+e._s(e.imgInfo.type_name))]),e._v(" "),a("div",[e._v("二维码链接:"+e._s(e.imgInfo.pay_qrcode_url))])]):e._e(),e._v(" "),2==e.imgInfo.type?a("div",{staticClass:"status"},[a("div",[e._v("收款类型:"+e._s(e.imgInfo.type_name))]),e._v(" "),a("div",[e._v("收款账号:"+e._s(e.imgInfo.account))]),e._v(" "),a("div",[e._v("真实姓名:"+e._s(e.imgInfo.real_name))])]):e._e(),e._v(" "),3==e.imgInfo.type?a("div",{staticClass:"status"},[a("div",[e._v("收款类型:"+e._s(e.imgInfo.type_name))]),e._v(" "),a("div",[e._v("所属银行:"+e._s(e.imgInfo.bank_name))]),e._v(" "),a("div",[e._v("收款卡号:"+e._s(e.imgInfo.bank_card))]),e._v(" "),a("div",[e._v("开户人:"+e._s(e.imgInfo.bank_account))]),e._v(" "),a("div",[e._v("备注:"+e._s(e.imgInfo.bank_desc))])]):e._e()])],1)},o=[];n._withStripped=!0,t.render=n,t.staticRenderFns=o}});